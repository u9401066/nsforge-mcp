# å¯¦ä¾‹æ¨å°ï¼šPower Amp è¼¸å‡ºäº¤è¯é›»å®¹è¨­è¨ˆ

> **User Question**: åœ¨ power amp è¼¸å‡ºåŠ äº¤è¯é›»å®¹ï¼Œå¦‚ä½•å½±éŸ¿ 5000Hz ä»¥ä¸Šçš„é«˜éŸ³ï¼Ÿ  
> **Date**: 2026-01-01  
> **Domain**: Audio Circuits - High-Pass Filter Design

---

## ğŸ¯ å•é¡Œæ¾„æ¸…

### ç”¨æˆ¶éœ€æ±‚
- åœ¨ power amp è¼¸å‡ºç«¯åŠ äº¤è¯é›»å®¹
- ç›®æ¨™ï¼šå½±éŸ¿ 5000Hz ä»¥ä¸Šçš„é«˜é »
- éœ€è€ƒæ…®ï¼šè¼¸å‡ºç´šé›»é˜»ã€é›»å®¹ ESRã€å–‡å­é˜»æŠ—

### é›»è·¯æ‹“æ’²

```
Power Amp Output
     â”‚
     â”œâ”€ R_out (è¼¸å‡ºç´šé›»é˜»)
     â”‚
     â”œâ”€ C_coupling (äº¤è¯é›»å®¹) + ESR
     â”‚
     â””â”€ Speaker (Z_speaker = 4Î© or 8Î©)
```

**é‡è¦æ¾„æ¸…**ï¼š
- âš ï¸ äº¤è¯é›»å®¹å½¢æˆçš„æ˜¯ **é«˜é€šæ¿¾æ³¢å™¨** (HPF)
- âœ… å®ƒæœƒã€Œé˜»éš”ä½é »ã€é€šéé«˜é »ã€
- âŒ å®ƒä¸æœƒã€Œå¢å¼·ã€é«˜é »ï¼Œåªæœƒè¡°æ¸›ä½é »

å¦‚æœç›®æ¨™æ˜¯ã€Œæå‡é«˜éŸ³ã€ï¼Œæœ‰å…©ç¨®å¯èƒ½ï¼š
1. **æƒ…å¢ƒ A**ï¼šé˜»éš”ä½é »é›œè¨Šï¼Œè®“é«˜é »ç›¸å°çªå‡º â†’ ç”¨äº¤è¯é›»å®¹ (HPF)
2. **æƒ…å¢ƒ B**ï¼šå¯¦éš›å¢ç›Šæå‡ â†’ éœ€è¦ä¸»å‹•é›»è·¯ (Shelving EQ)

æˆ‘å€‘å…ˆæ¨å°æƒ…å¢ƒ Aï¼ˆäº¤è¯é›»å®¹ HPFï¼‰ã€‚

---

## ğŸ“ æ¨å°æµç¨‹ï¼ˆNSForge æ¡†æ¶ï¼‰

### Step 0: è­˜åˆ¥åŸºç¤åŸç†

**Principle**: RC High-Pass Filter

```yaml
principle:
  id: rc_highpass
  base_form: "H(s) = s*R*C / (1 + s*R*C)"
  cutoff_freq: "f_c = 1 / (2*pi*R*C)"
```

### Step 1: ç†æƒ³åŒ–åˆ†æ

**å·²çŸ¥**ï¼š
- ç›®æ¨™æˆªæ­¢é »ç‡ï¼šf_c = 5000 Hz
- å–‡å­é˜»æŠ—ï¼šR_speaker = 8Î© (å‡è¨­)

**å…¬å¼**ï¼š
$$f_c = \frac{1}{2\pi R_{speaker} C_{coupling}}$$

**åè§£é›»å®¹å€¼**ï¼š
$$C_{coupling} = \frac{1}{2\pi f_c R_{speaker}}$$

è®“æˆ‘ç”¨ sympy-mcp è¨ˆç®—ï¼š

```python
# ä»£å…¥æ•¸å€¼
f_c = 5000  # Hz
R_speaker = 8  # Î©
C_coupling = 1 / (2 * pi * f_c * R_speaker)
```

**çµæœï¼ˆç†æƒ³ï¼‰**ï¼š
$$C_{coupling} = \frac{1}{2\pi \times 5000 \times 8} \approx 3.98 \mu F$$

---

### Step 2: æ‡‰ç”¨ä¿®æ­£é … - è¼¸å‡ºç´šé›»é˜»

**Modification**: `output_impedance`

å¯¦éš› power amp æœ‰è¼¸å‡ºé˜»æŠ— R_outï¼ˆé€šå¸¸ 0.01 ~ 0.1Î©ï¼‰

**ä¿®æ­£å¾Œçš„ç¸½é›»é˜»**ï¼š
$$R_{total} = R_{out} + R_{speaker}$$

**å½±éŸ¿**ï¼š
- å¦‚æœ R_out = 0.05Î© â†’ R_total â‰ˆ 8.05Î©
- æˆªæ­¢é »ç‡è®ŠåŒ–ï¼šf_c â‰ˆ 4969 Hzï¼ˆå¾®å¹…é™ä½ï¼‰

**çµè«–**ï¼šè¼¸å‡ºç´šé›»é˜»å½±éŸ¿ä¸å¤§ï¼ˆå› ç‚º R_out << R_speakerï¼‰

---

### Step 3: æ‡‰ç”¨ä¿®æ­£é … - é›»å®¹ ESR

**Modification**: `capacitor_esr`

**ç‰©ç†æ„ç¾©**ï¼š
- å¯¦éš›é›»å®¹æœ‰ç­‰æ•ˆä¸²è¯é›»é˜» (ESR)
- é›»è§£é›»å®¹ï¼šESR = 0.1 ~ 1Î©
- è–„è†œé›»å®¹ï¼šESR = 0.01 ~ 0.1Î©

**ç­‰æ•ˆé›»è·¯**ï¼š
```
C_coupling + ESR (ä¸²è¯) â†’ çœ‹èµ·ä¾†åƒé›»é˜»å¢åŠ 
```

**ä¿®æ­£å¾Œ**ï¼š
$$R_{total} = R_{out} + ESR + R_{speaker}$$

**æ•¸å€¼ç¯„ä¾‹**ï¼ˆé›»è§£é›»å®¹ï¼‰ï¼š
- ESR = 0.5Î©
- R_total = 0.05 + 0.5 + 8 = 8.55Î©
- æ–°çš„æˆªæ­¢é »ç‡ï¼šf_c â‰ˆ 4668 Hz

**å¯¦ç”¨å»ºè­°**ï¼š
- âœ… ä½¿ç”¨è–„è†œé›»å®¹ï¼ˆä½ ESRï¼‰
- âŒ é¿å…é›»è§£é›»å®¹ï¼ˆESR é«˜ä¸”éš¨æº«åº¦è®ŠåŒ–ï¼‰

---

### Step 4: æ‡‰ç”¨ä¿®æ­£é … - å–‡å­é˜»æŠ—é »ç‡ç‰¹æ€§

**Modification**: `speaker_impedance_curve`

**é—œéµæ´å¯Ÿ**ï¼š
âš ï¸ **å–‡å­é˜»æŠ—ä¸æ˜¯å¸¸æ•¸ï¼**

å¯¦éš›å–‡å­é˜»æŠ—éš¨é »ç‡è®ŠåŒ–ï¼š
```
é »ç‡ (Hz)    |  é˜»æŠ— (Î©)
-------------|----------
   20        |   15      (å…±æŒ¯å³°)
  100        |    8      (æ¨™ç¨±å€¼)
 1000        |    8
 5000        |   10      (éŸ³åœˆé›»æ„Ÿæ•ˆæ‡‰)
10000        |   15
```

**å½±éŸ¿åˆ†æ**ï¼š
1. **åœ¨ 5000Hz é™„è¿‘**ï¼š
   - Z_speaker â‰ˆ 10Î© (è€Œéæ¨™ç¨± 8Î©)
   - å¯¦éš› f_c = 1/(2Ï€ Ã— 10 Ã— 4Î¼F) â‰ˆ 3979 Hz
   - **æˆªæ­¢é »ç‡æ¯”é æœŸä½ï¼**

2. **åœ¨å…±æŒ¯é »ç‡ï¼ˆ~50Hzï¼‰**ï¼š
   - Z_speaker â‰ˆ 15Î©
   - ä½é »è¡°æ¸›æ›´æ˜é¡¯

**ä¿®æ­£æ–¹æ³•**ï¼š
- æ¸¬é‡å–‡å­åœ¨ç›®æ¨™é »ç‡çš„å¯¦éš›é˜»æŠ—
- æˆ–ä½¿ç”¨é˜»æŠ—å¹³è¡¡å™¨ï¼ˆzobel networkï¼‰

---

### Step 5: å®Œæ•´æ¨å°çµæœ

**å¯¦éš›è½‰ç§»å‡½æ•¸**ï¼š
$$H(j\omega) = \frac{j\omega (R_{out} + ESR + Z_{speaker}(\omega)) C}{1 + j\omega (R_{out} + ESR + Z_{speaker}(\omega)) C}$$

**å¯¦éš›æˆªæ­¢é »ç‡**ï¼ˆè€ƒæ…®æ‰€æœ‰å› ç´ ï¼‰ï¼š
$$f_c = \frac{1}{2\pi (R_{out} + ESR + Z_{speaker}(f_c)) C}$$

**æ•¸å€¼ç¸½çµ**ï¼ˆç›®æ¨™ 5000Hzï¼‰ï¼š

| æƒ…å¢ƒ | R_total | C æ‰€éœ€ | å¯¦éš› f_c |
|------|---------|--------|----------|
| ç†æƒ³ï¼ˆ8Î©å–‡å­ï¼‰ | 8.00Î© | 3.98Î¼F | 5000 Hz |
| +è¼¸å‡ºé˜»æŠ— | 8.05Î© | 3.95Î¼F | 4969 Hz |
| +é›»å®¹ESR(è–„è†œ) | 8.15Î© | 3.90Î¼F | 4908 Hz |
| +é›»å®¹ESR(é›»è§£) | 8.55Î© | 3.72Î¼F | 4668 Hz |
| +å–‡å­é˜»æŠ—è®ŠåŒ–(5kHz) | 10.55Î© | 3.01Î¼F | **3979 Hz** âš ï¸ |

**é—œéµç™¼ç¾**ï¼š
- ğŸ”´ **å–‡å­é˜»æŠ—é »ç‡ç‰¹æ€§æ˜¯æœ€å¤§å½±éŸ¿å› ç´ **
- ğŸŸ¡ é›»å®¹ ESR æ¬¡ä¹‹ï¼ˆé›»è§£ vs è–„è†œå·®ç•°å¤§ï¼‰
- ğŸŸ¢ è¼¸å‡ºç´šé›»é˜»å½±éŸ¿æœ€å°

---

## ğŸ“ è¨­è¨ˆå»ºè­°

### æ–¹æ¡ˆ Aï¼šç²¾ç¢ºè¨­è¨ˆï¼ˆæ¨è–¦ï¼‰

1. **æ¸¬é‡å–‡å­é˜»æŠ—æ›²ç·š**
   - ä½¿ç”¨é˜»æŠ—åˆ†æå„€æˆ– DATS V2
   - è¨˜éŒ„ 5000Hz çš„å¯¦éš›é˜»æŠ—

2. **é¸æ“‡ä½ ESR é›»å®¹**
   - è–„è†œé›»å®¹ï¼ˆèšä¸™çƒ¯ PPï¼‰
   - ESR < 0.1Î©

3. **è£œå„Ÿè¨ˆç®—**
   - å‡è¨­ 5kHz å¯¦éš›é˜»æŠ— = 10Î©
   - C = 1/(2Ï€ Ã— 5000 Ã— 10) â‰ˆ 3.18Î¼F
   - é¸ç”¨æ¨™æº–å€¼ï¼š3.3Î¼F

4. **é©—è­‰**
   - ç”¨ LTSpice æ¨¡æ“¬
   - å¯¦æ¸¬é »ç‡éŸ¿æ‡‰

### æ–¹æ¡ˆ Bï¼šä¿å®ˆè¨­è¨ˆï¼ˆç°¡å–®ï¼‰

- é¸ç”¨ 2.2Î¼F ~ 3.3Î¼F è–„è†œé›»å®¹
- æˆªæ­¢é »ç‡æœƒè½åœ¨ 4 ~ 6 kHz ä¹‹é–“
- å°è½æ„Ÿå½±éŸ¿ä¸å¤§ï¼ˆäººè€³æ•æ„Ÿåº¦å·®ç•°ï¼‰

### æ–¹æ¡ˆ Cï¼šä¸»å‹• Shelving Filterï¼ˆçœŸæ­£æå‡é«˜é »ï¼‰

å¦‚æœç›®æ¨™æ˜¯ã€Œå¢å¼·é«˜éŸ³ã€è€Œéã€Œé˜»éš”ä½é »ã€ï¼Œæ‡‰è©²ç”¨ï¼š

```
Op-amp Shelving Filter:
  - Boost 5kHz ä»¥ä¸Š +3dB ~ +6dB
  - Q factor æ§åˆ¶æå‡ç¯„åœ
  - é¿å…è¢«å‹•æè€—
```

---

## ğŸ§® SymPy-MCP è¨ˆç®—è…³æœ¬

è®“æˆ‘ç”¨ sympy-mcp ç²¾ç¢ºè¨ˆç®—ï¼š

```python
# å¼•å…¥è®Šæ•¸
intro_many([
    {var: "R_out", pos_assumptions: ["positive", "real"]},
    {var: "ESR", pos_assumptions: ["positive", "real"]},
    {var: "R_speaker", pos_assumptions: ["positive", "real"]},
    {var: "C", pos_assumptions: ["positive", "real"]},
    {var: "f_c", pos_assumptions: ["positive", "real"]}
])

# ç¸½é›»é˜»
R_total = introduce_expression("R_out + ESR + R_speaker")

# æˆªæ­¢é »ç‡å…¬å¼
expr = introduce_expression("f_c - 1/(2*pi*R_total*C)")

# è§£å‡ºé›»å®¹å€¼
solve_algebraically(expr, "C", domain="real")
# â†’ C = 1/(2*pi*f_c*(R_out + ESR + R_speaker))

# ä»£å…¥æ•¸å€¼
substitute_expression(C, {
    f_c: 5000,
    R_out: 0.05,
    ESR: 0.05,
    R_speaker: 10  # 5kHz å¯¦æ¸¬å€¼
})
# â†’ C â‰ˆ 3.16 Î¼F
```

---

## ğŸ“Š æ¨å°è¿½æº¯

é€™å€‹æ¨å°éç¨‹å±•ç¤ºäº† NSForge æ¡†æ¶çš„åƒ¹å€¼ï¼š

```
Base Principle:
  RC High-Pass Filter [ä¾†è‡ªåŸºç¤é›»è·¯å­¸]
  
  â†“ + Modification 1
  
è€ƒæ…®è¼¸å‡ºé˜»æŠ—:
  R_total = R_out + R_load
  [å½±éŸ¿ï¼šå¾®å°ï¼Œ~1%]
  
  â†“ + Modification 2
  
è€ƒæ…®é›»å®¹ ESR:
  R_total = R_out + ESR + R_load
  [å½±éŸ¿ï¼šä¸­ç­‰ï¼Œé›»è§£ vs è–„è†œå·®ç•°å¤§]
  
  â†“ + Modification 3
  
è€ƒæ…®å–‡å­é˜»æŠ—æ›²ç·š:
  Z_speaker(f) â‰  å¸¸æ•¸
  [å½±éŸ¿ï¼šæœ€å¤§ï¼Œå¯é” 25%]
  
  â†“ æœ€çµ‚çµæœ
  
å¯¦éš›è¨­è¨ˆå€¼: C â‰ˆ 3.0~3.3 Î¼F (è–„è†œé›»å®¹)
å¯¦éš›æˆªæ­¢é »ç‡: ~4~5 kHz (è¦–å–‡å­ç‰¹æ€§)
```

---

## ğŸ¯ å›ç­”åŸå•é¡Œ

**Q1**: å®¹å€¼æ€æ¨£å½±éŸ¿æ¿¾æ³¢æ•ˆæ‡‰ï¼Ÿ
**A1**: 
- C è¶Šå¤§ â†’ æˆªæ­¢é »ç‡è¶Šä½ â†’ ä¿ç•™æ›´å¤šä½é »
- C è¶Šå° â†’ æˆªæ­¢é »ç‡è¶Šé«˜ â†’ è¡°æ¸›æ›´å¤šä½é »
- é—œä¿‚ï¼šf_c âˆ 1/C

**Q2**: è¼¸å‡ºç´šé›»é˜»æœ‰å½±éŸ¿å—ï¼Ÿ
**A2**: 
- âœ… æœ‰ï¼Œä½†å½±éŸ¿å¾ˆå°ï¼ˆ~0.6%ï¼‰
- R_out é€šå¸¸ < 0.1Î©ï¼Œé å°æ–¼å–‡å­é˜»æŠ—

**Q3**: é›»å®¹å…§éƒ¨é›»é˜»æœ‰å½±éŸ¿å—ï¼Ÿ
**A3**: 
- âœ… æœ‰ï¼Œä¸­ç­‰å½±éŸ¿ï¼ˆ~6%ï¼‰
- **é—œéµå»ºè­°**ï¼šä½¿ç”¨è–„è†œé›»å®¹ï¼ˆESR < 0.1Î©ï¼‰
- é¿å…é›»è§£é›»å®¹ï¼ˆESR å¯é” 0.5~1Î©ï¼‰

**Q4**: å–‡å­é˜»æŠ—æœ‰å½±éŸ¿å—ï¼Ÿ
**A4**: 
- âœ…âœ… **æœ€å¤§å½±éŸ¿**ï¼ˆå¯é” 25%ï¼‰
- å–‡å­é˜»æŠ—éš¨é »ç‡è®ŠåŒ–
- å»ºè­°ï¼šæ¸¬é‡ç›®æ¨™é »ç‡çš„å¯¦éš›é˜»æŠ—

**Q5**: é€™æ¨£èƒ½ã€Œå¢åŠ ã€é«˜éŸ³å—ï¼Ÿ
**A5**: 
- âŒ ä¸èƒ½ã€‚äº¤è¯é›»å®¹å½¢æˆé«˜é€šæ¿¾æ³¢ï¼Œåªèƒ½ã€Œè¡°æ¸›ä½é »ã€
- âœ… å¦‚æœç›®æ¨™æ˜¯æå‡é«˜é »å¢ç›Šï¼Œéœ€è¦ä¸»å‹• shelving filter

---

## ğŸ”§ å¯¦ä½œå»ºè­°

### æ¨è–¦æ–¹æ¡ˆ
```yaml
component_selection:
  capacitor:
    type: "èšä¸™çƒ¯è–„è†œé›»å®¹ (PP Film)"
    value: "3.3Î¼F"
    voltage_rating: "100V"
    ESR: "< 0.05Î©"
    
  æ¸¬è©¦æ­¥é©Ÿ:
    1. "æ¸¬é‡å–‡å­åœ¨ 5kHz çš„å¯¦éš›é˜»æŠ—"
    2. "ç”¨ç¤ºæ³¢å™¨é©—è­‰ -3dB é»"
    3. "è½æ„Ÿæ¸¬è©¦ï¼ˆç™½å™ªè²ã€éŸ³æ¨‚ï¼‰"
```

---

**Status**: å®Œæ•´æ¨å°å®Œæˆ  
**Framework Used**: NSForge Derivation Framework  
**Traceable to**: RC Filter Basic Principle + 3 Modifications  
**Educational Value**: å±•ç¤ºå¾ç†æƒ³åˆ°å¯¦éš›çš„æ¨å°éç¨‹
