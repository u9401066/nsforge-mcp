{
  "session_id": "37e9f2bb",
  "name": "two_compartment_drug_pk",
  "description": "é›™æˆ¿å®¤è—¥ç‰©å‹•åŠ›å­¸æ¨¡å‹ - çµåˆæ¸…é™¤ç‡ã€åˆ†ä½ˆå®¹ç©èˆ‡è›‹ç™½çµåˆ",
  "status": "completed",
  "formulas": {
    "clearance": {
      "id": "clearance",
      "expression": "V_d*k_e",
      "latex": "V_{d} k_{e}",
      "variables": {
        "V_d": {
          "name": "V_d",
          "description": "",
          "unit": null,
          "constraints": "positive",
          "value": null
        },
        "k_e": {
          "name": "k_e",
          "description": "",
          "unit": null,
          "constraints": "positive",
          "value": null
        }
      },
      "source": "textbook",
      "source_detail": "Goodman & Gilman's Pharmacology, Ch.2",
      "original_input": "k_e * V_d",
      "input_format": "sympy",
      "name": "è—¥ç‰©æ¸…é™¤ç‡ CL",
      "description": "æ¸…é™¤ç‡ç­‰æ–¼æ¶ˆé™¤é€Ÿç‡å¸¸æ•¸ä¹˜ä»¥åˆ†ä½ˆå®¹ç©",
      "category": "",
      "tags": [],
      "references": [],
      "created_at": "2026-01-03T09:29:06.110958"
    },
    "free_drug": {
      "id": "free_drug",
      "expression": "C_total*(1 - f_b)",
      "latex": "C_{total} \\left(1 - f_{b}\\right)",
      "variables": {
        "f_b": {
          "name": "f_b",
          "description": "",
          "unit": null,
          "constraints": "real",
          "value": null
        },
        "C_total": {
          "name": "C_total",
          "description": "",
          "unit": null,
          "constraints": "positive",
          "value": null
        }
      },
      "source": "textbook",
      "source_detail": "Clinical Pharmacokinetics, 5th Ed",
      "original_input": "C_total * (1 - f_b)",
      "input_format": "sympy",
      "name": "æ¸¸é›¢è—¥ç‰©æ¿ƒåº¦ C_free",
      "description": "æ¸¸é›¢è—¥ç‰©æ¿ƒåº¦ = ç¸½æ¿ƒåº¦ Ã— (1 - è›‹ç™½çµåˆç‡)",
      "category": "",
      "tags": [],
      "references": [],
      "created_at": "2026-01-03T09:29:17.230128"
    },
    "effective_clearance": {
      "id": "effective_clearance",
      "expression": "CL_int*f_u",
      "latex": "CL_{int} f_{u}",
      "variables": {
        "CL_int": {
          "name": "CL_int",
          "description": "",
          "unit": null,
          "constraints": "positive",
          "value": null
        },
        "f_u": {
          "name": "f_u",
          "description": "",
          "unit": null,
          "constraints": "real",
          "value": null
        }
      },
      "source": "textbook",
      "source_detail": "Applied Clinical Pharmacokinetics, 3rd Ed",
      "original_input": "CL_int * f_u",
      "input_format": "sympy",
      "name": "æœ‰æ•ˆæ¸…é™¤ç‡ CL_eff",
      "description": "æœ‰æ•ˆæ¸…é™¤ç‡ = å…§åœ¨æ¸…é™¤ç‡ Ã— æ¸¸é›¢åˆ†ç‡",
      "category": "",
      "tags": [],
      "references": [],
      "created_at": "2026-01-03T09:29:27.544145"
    }
  },
  "current_expression": "CL_int*(1 - f_b)/V_d",
  "current_formula_id": "effective_clearance",
  "steps": [
    {
      "step_number": 1,
      "operation": "load_formula",
      "description": "Load formula 'clearance' from textbook",
      "input_expressions": {
        "clearance": "CL = k_e * V_d"
      },
      "output_expression": "Eq(C*L, V_d*k_e)",
      "output_latex": "C L = V_{d} k_{e}",
      "sympy_command": "parse('CL = k_e * V_d')",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:02.172032"
    },
    {
      "step_number": 2,
      "operation": "load_formula",
      "description": "Load formula 'clearance' from textbook",
      "input_expressions": {
        "clearance": "k_e * V_d"
      },
      "output_expression": "V_d*k_e",
      "output_latex": "V_{d} k_{e}",
      "sympy_command": "parse('k_e * V_d')",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:06.110958"
    },
    {
      "step_number": 3,
      "operation": "custom",
      "description": "ğŸ“‹ [ASSUMPTION] æ¶ˆé™¤é€Ÿç‡å¸¸æ•¸ k_e ç¯„åœé€šå¸¸ç‚º 0.01-0.5 hâ»Â¹ï¼Œå–æ±ºæ–¼è—¥ç‰©æ€§è³ªå’Œä»£è¬é€”å¾‘\n   Related: k_e",
      "input_expressions": {
        "note_type": "assumption",
        "related_variables": "['k_e']",
        "related_step": ""
      },
      "output_expression": "V_d*k_e",
      "output_latex": "V_{d} k_{e}",
      "sympy_command": "# Note (no computation)",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:11.901594"
    },
    {
      "step_number": 4,
      "operation": "custom",
      "description": "ğŸ”¬ [PHYSICAL] åˆ†ä½ˆå®¹ç© V_d å°æ–¼è¦ªè„‚æ€§è—¥ç‰©å¯èƒ½è¶…éé«”é‡ï¼Œè¡¨ç¤ºè—¥ç‰©å»£æ³›åˆ†ä½ˆæ–¼çµ„ç¹”ä¸­\n   Related: V_d",
      "input_expressions": {
        "note_type": "physical",
        "related_variables": "['V_d']",
        "related_step": ""
      },
      "output_expression": "V_d*k_e",
      "output_latex": "V_{d} k_{e}",
      "sympy_command": "# Note (no computation)",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:11.949007"
    },
    {
      "step_number": 5,
      "operation": "load_formula",
      "description": "Load formula 'free_drug' from textbook",
      "input_expressions": {
        "free_drug": "C_total * (1 - f_b)"
      },
      "output_expression": "C_total*(1 - f_b)",
      "output_latex": "C_{total} \\left(1 - f_{b}\\right)",
      "sympy_command": "parse('C_total * (1 - f_b)')",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:17.230128"
    },
    {
      "step_number": 6,
      "operation": "custom",
      "description": "ğŸ¥ [CLINICAL] è›‹ç™½çµåˆç‡ f_b ç¯„åœ 0-1ï¼Œé«˜åº¦çµåˆè—¥ç‰© (f_b > 0.9) å¦‚ warfarin éœ€æ³¨æ„è—¥ç‰©äº¤äº’ä½œç”¨\n   Related: f_b",
      "input_expressions": {
        "note_type": "clinical",
        "related_variables": "['f_b']",
        "related_step": ""
      },
      "output_expression": "C_total*(1 - f_b)",
      "output_latex": "C_{total} \\left(1 - f_{b}\\right)",
      "sympy_command": "# Note (no computation)",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:23.047077"
    },
    {
      "step_number": 7,
      "operation": "custom",
      "description": "ğŸ’¡ [OBSERVATION] ç¸½æ¿ƒåº¦ C_total ç‚ºå¯¦é©—å®¤æ¸¬é‡å€¼ï¼Œä½†åªæœ‰æ¸¸é›¢è—¥ç‰©å…·æœ‰è—¥ç†æ´»æ€§\n   Related: C_total",
      "input_expressions": {
        "note_type": "observation",
        "related_variables": "['C_total']",
        "related_step": ""
      },
      "output_expression": "C_total*(1 - f_b)",
      "output_latex": "C_{total} \\left(1 - f_{b}\\right)",
      "sympy_command": "# Note (no computation)",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:23.095117"
    },
    {
      "step_number": 8,
      "operation": "load_formula",
      "description": "Load formula 'effective_clearance' from textbook",
      "input_expressions": {
        "effective_clearance": "CL_int * f_u"
      },
      "output_expression": "CL_int*f_u",
      "output_latex": "CL_{int} f_{u}",
      "sympy_command": "parse('CL_int * f_u')",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:27.544145"
    },
    {
      "step_number": 9,
      "operation": "custom",
      "description": "ğŸ”¬ [PHYSICAL] å…§åœ¨æ¸…é™¤ç‡ CL_int åæ˜ è‚è‡Ÿé…µç´ çš„ä»£è¬èƒ½åŠ›ï¼Œå— CYP450 èª˜å°/æŠ‘åˆ¶å½±éŸ¿\n   Related: CL_int",
      "input_expressions": {
        "note_type": "physical",
        "related_variables": "['CL_int']",
        "related_step": ""
      },
      "output_expression": "CL_int*f_u",
      "output_latex": "CL_{int} f_{u}",
      "sympy_command": "# Note (no computation)",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:33.017750"
    },
    {
      "step_number": 10,
      "operation": "custom",
      "description": "ğŸ¥ [CLINICAL] æ¸¸é›¢åˆ†ç‡ f_u = 1 - f_bï¼Œä½ç™½è›‹ç™½è¡€ç—‡æ‚£è€… f_u å¢åŠ ï¼Œéœ€èª¿æ•´åŠ‘é‡\n   Related: f_u, f_b",
      "input_expressions": {
        "note_type": "clinical",
        "related_variables": "['f_u', 'f_b']",
        "related_step": ""
      },
      "output_expression": "CL_int*f_u",
      "output_latex": "CL_{int} f_{u}",
      "sympy_command": "# Note (no computation)",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:33.066758"
    },
    {
      "step_number": 11,
      "operation": "substitute",
      "description": "å°‡æ¸¸é›¢åˆ†ç‡å®šç¾©ä»£å…¥æœ‰æ•ˆæ¸…é™¤ç‡",
      "input_expressions": {
        "original": "CL_int*f_u",
        "replacement": "f_u = 1 - f_b"
      },
      "output_expression": "CL_int*(1 - f_b)",
      "output_latex": "CL_{int} \\left(1 - f_{b}\\right)",
      "sympy_command": "expr.subs(f_u, 1 - f_b)",
      "notes": "é€™ä¸€æ­¥é€£çµäº†è›‹ç™½çµåˆç‡èˆ‡æœ‰æ•ˆæ¸…é™¤ç‡çš„é—œä¿‚",
      "assumptions": [
        "f_u = 1 - f_b (æ¸¸é›¢åˆ†ç‡èˆ‡çµåˆç‡äº’è£œ)"
      ],
      "limitations": [
        "å‡è¨­è›‹ç™½çµåˆç‚ºå¯é€†ä¸”é”å¹³è¡¡ç‹€æ…‹"
      ],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:40.791213"
    },
    {
      "step_number": 12,
      "operation": "custom",
      "description": "ğŸ’¡ [OBSERVATION] ç•¶ f_b æ¥è¿‘ 1 æ™‚ï¼ˆé«˜åº¦è›‹ç™½çµåˆï¼‰ï¼Œæœ‰æ•ˆæ¸…é™¤ç‡è¶¨è¿‘æ–¼é›¶ï¼Œè—¥ç‰©åŠè¡°æœŸé¡¯è‘—å»¶é•·\n   Related: f_b, CL_int\n   See step 11",
      "input_expressions": {
        "note_type": "observation",
        "related_variables": "['f_b', 'CL_int']",
        "related_step": "11"
      },
      "output_expression": "CL_int*(1 - f_b)",
      "output_latex": "CL_{int} \\left(1 - f_{b}\\right)",
      "sympy_command": "# Note (no computation)",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:47.167735"
    },
    {
      "step_number": 13,
      "operation": "custom",
      "description": "âš ï¸ [LIMITATION] æ­¤æ¨¡å‹å‡è¨­ç·šæ€§å‹•åŠ›å­¸ï¼Œé«˜æ¿ƒåº¦æ™‚å¯èƒ½å‡ºç¾è›‹ç™½çµåˆé£½å’Œç¾è±¡\n   Related: f_b\n   See step 11",
      "input_expressions": {
        "note_type": "limitation",
        "related_variables": "['f_b']",
        "related_step": "11"
      },
      "output_expression": "CL_int*(1 - f_b)",
      "output_latex": "CL_{int} \\left(1 - f_{b}\\right)",
      "sympy_command": "# Note (no computation)",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:29:47.199671"
    },
    {
      "step_number": 14,
      "operation": "solve",
      "description": "æ±‚è§£æ¶ˆé™¤é€Ÿç‡å¸¸æ•¸ k_eï¼Œçµåˆä¸‰å€‹å…¬å¼\n\nğŸ“ Notes: æ­¤å…¬å¼æ•´åˆäº†å…§åœ¨æ¸…é™¤ç‡ã€è›‹ç™½çµåˆç‡èˆ‡åˆ†ä½ˆå®¹ç©ä¸‰å€‹åƒæ•¸",
      "input_expressions": {
        "source": "sympy_mcp",
        "notes": "æ­¤å…¬å¼æ•´åˆäº†å…§åœ¨æ¸…é™¤ç‡ã€è›‹ç™½çµåˆç‡èˆ‡åˆ†ä½ˆå®¹ç©ä¸‰å€‹åƒæ•¸"
      },
      "output_expression": "CL_int*(1 - f_b)/V_d",
      "output_latex": "\\frac{CL_{int} \\left(1 - f_{b}\\right)}{V_{d}}",
      "sympy_command": "# From sympy_mcp: CL_int * (1 - f_b) / V_d...",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:30:23.041269"
    },
    {
      "step_number": 15,
      "operation": "custom",
      "description": "ğŸ”¬ [PHYSICAL] k_e èˆ‡ V_d æˆåæ¯”ï¼šåˆ†ä½ˆå®¹ç©å¤§çš„è—¥ç‰©ï¼ˆå¦‚è„‚æº¶æ€§è—¥ç‰©ï¼‰ï¼Œæ¶ˆé™¤é€Ÿç‡å¸¸æ•¸æœƒè¼ƒå°\n   Related: k_e, V_d\n   See step 14",
      "input_expressions": {
        "note_type": "physical",
        "related_variables": "['k_e', 'V_d']",
        "related_step": "14"
      },
      "output_expression": "CL_int*(1 - f_b)/V_d",
      "output_latex": "\\frac{CL_{int} \\left(1 - f_{b}\\right)}{V_{d}}",
      "sympy_command": "# Note (no computation)",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:30:29.214451"
    },
    {
      "step_number": 16,
      "operation": "custom",
      "description": "ğŸ¥ [CLINICAL] å¯ç”±æ­¤å…¬å¼è¨ˆç®—åŠè¡°æœŸ tÂ½ = ln(2)/k_eï¼Œç”¨æ–¼è‡¨åºŠçµ¦è—¥é–“éš”è¨­è¨ˆ\n   Related: k_e\n   See step 14",
      "input_expressions": {
        "note_type": "clinical",
        "related_variables": "['k_e']",
        "related_step": "14"
      },
      "output_expression": "CL_int*(1 - f_b)/V_d",
      "output_latex": "\\frac{CL_{int} \\left(1 - f_{b}\\right)}{V_{d}}",
      "sympy_command": "# Note (no computation)",
      "notes": "",
      "assumptions": [],
      "limitations": [],
      "status": "success",
      "verification_result": "",
      "timestamp": "2026-01-03T09:30:29.256360"
    }
  ],
  "created_at": "2026-01-03T09:28:55.532852",
  "updated_at": "2026-01-03T09:30:41.024521",
  "author": "NSForge Demo",
  "tags": []
}